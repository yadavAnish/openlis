<%@ page language="java"
	contentType="text/html; charset=utf-8"
	import="java.util.Date,
	us.mn.state.health.lims.common.action.IActionConstants" %>

<%@ taglib uri="/tags/struts-bean" prefix="bean" %>
<%@ taglib uri="/tags/struts-html" prefix="html" %>
<%@ taglib uri="/tags/struts-logic" prefix="logic" %>
<%@ taglib uri="/tags/labdev-view" prefix="app" %>
<bean:define id="formName" value='<%= (String)request.getAttribute(IActionConstants.FORM_NAME) %>' />

<%!

String allowEdits = "true";
String errorTime = "";
%>

<%
if (request.getAttribute(IActionConstants.ALLOW_EDITS_KEY) != null) {
 allowEdits = (String)request.getAttribute(IActionConstants.ALLOW_EDITS_KEY);
}

//bugzilla 1494
java.util.Locale locale = (java.util.Locale)request.getSession().getAttribute(org.apache.struts.Globals.LOCALE_KEY);
errorTime =
					us.mn.state.health.lims.common.util.resources.ResourceLocator.getInstance().getMessageResources().getMessage(
					locale,
                    "error.time");
%>

<script language="JavaScript1.2">
function validateForm(form) {
    return validateSampleForm(form);
}

function myCheckTime(time) {
    if (!checkTime(time)) {
        //bugzilla 1494
         alert('<%=errorTime%>');
    }
}
</script>

<table>
		<tr>
						<td class="label">
							<bean:message key="sample.id"/>:
						</td>	
						<td> 
							<app:text name="<%=formName%>" property="id" allowEdits="false"/>
						</td>
		</tr>
		<tr>
						<td class="label">
							<bean:message key="sample.accessionNumber"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
							<app:text name="<%=formName%>" property="accessionNumber" allowEdits="false"/>
						</td>
	    </tr>
  		<%--for future use--%>
		 <%--/tr>
		 		<tr>
						<td class="label">
							<bean:message key="sample.packageId"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="packageId" />
    					</td>
		</tr--%>
 		<tr>
						<td class="label">
							<bean:message key="sample.domain"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
					   	
					   	    
					   	  <html:select name="<%=formName%>" property="domain">
					   	  <app:optionsCollection 
										name="<%=formName%>" 
							    		property="sampleDomains" 
										label="code" 
										value="code"  />
                        </html:select>
						</td>
		</tr>
		<tr>
						<td class="label">
							<bean:message key="sample.nextItemSequence"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="nextItemSequence" allowEdits="false" />
    					</td>
		</tr>
		<%--currently not used--%>
		<tr>
						<td class="label">
							<bean:message key="sample.revision"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="revision" allowEdits="false" />
    					</td>
		</tr>
		<%--this is generated by application and maybe displayed elsewhere--%>
        <tr>
						<td class="label">
							<bean:message key="sample.enteredDate"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="enteredDateForDisplay" allowEdits="false" onkeyup="DateFormat(this,this.value,event,false,'1')" onblur="DateFormat(this,this.value,event,true,'1')" />
    					</td>
		</tr>
	    <tr>
						<td class="label">
							<bean:message key="sample.receivedDate"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="receivedDateForDisplay" onkeyup="DateFormat(this,this.value,event,false,'1')" onblur="DateFormat(this,this.value,event,true,'1')" />
    					</td>
		</tr>
	    <tr>
						<td class="label">
							<bean:message key="sample.referredCultureFlag"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="referredCultureFlag" size="1" onblur="this.value=this.value.toUpperCase()"/>
    					</td>
		</tr>
		 <tr>
						<td class="label">
							<bean:message key="sample.collectionDate"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="collectionDateForDisplay" onkeyup="DateFormat(this,this.value,event,false,'1')" onblur="DateFormat(this,this.value,event,true,'1')"/>
    					</td>
		</tr>
		 <tr>
						<td class="label">
							<bean:message key="sample.collectionTime"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="collectionTimeForDisplay" onblur="myCheckTime(this)"/>
    					</td>
		</tr>
		<tr>
						<td class="label">
							<bean:message key="sample.clientReference"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="clientReference" />
    					</td>
		</tr>
		<%--this is assigned programmatically--%>
		<tr>
						<td class="label">
							<bean:message key="sample.status"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="status" allowEdits="false" />
    					</td>
		</tr>
		<%--this is assigned programmatically--%>
		<tr>
						<td class="label">
							<bean:message key="sample.releasedDate"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="releasedDateForDisplay" allowEdits="false" onkeyup="DateFormat(this,this.value,event,false,'1')" onblur="DateFormat(this,this.value,event,true,'1')" />
    					</td>
		</tr>
		<tr>
						<td class="label">
							<bean:message key="sample.stickerReceivedFlag"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="stickerReceivedFlag" size="1" onblur="this.value=this.value.toUpperCase()"/>
    					</td>
		</tr>
		<%--this is generated by application and maybe displayed elsewhere--%>
		<%--removed per Christina on 3/03/2006--%>
		<%--tr>
						<td class="label">
							<bean:message key="sample.enteredBy"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
				        	<app:text name="<%=formName%>" property="enteredBy" allowEdits="false" />
    					</td>
		</tr--%>
		<tr>
						<td class="label">
							<bean:message key="sample.sysUserId"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
					   	 			   	    
						<html:select name="<%=formName%>" property="sysUserId">
					   	  <app:optionsCollection 
										name="<%=formName%>" 
							    		property="sysUsers" 
										label="nameForDisplay" 
										value="id"  
							        	filterProperty="isActive" 
							        	filterValue="N"
							 			allowEdits="true"
							/>
                        
					   </html:select>
						</td>
		</tr>
		<%--barcode and transmissionDate used on different form--%>
		 <tr>
						<td class="label">
							<bean:message key="sample.barcode"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
							<app:text name="<%=formName%>" property="barcode" allowEdits="false" />
						</td>
		 </tr>
		 <tr>
						<td class="label">
							<bean:message key="sample.transmissionDate"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
							<app:text name="<%=formName%>" property="transmissionDateForDisplay" allowEdits="false" onkeyup="DateFormat(this,this.value,event,false,'1')" onblur="DateFormat(this,this.value,event,true,'1')" />
						</td>
		 </tr>
		 <%--not needed yet--%>
		 <%--tr>
						<td class="label">
							<bean:message key="sample.sampleIdRelatesTo"/>:<span class="requiredlabel">*</span>
						</td>	
						<td> 
					   	 			   	    
						<html:select name="<%=formName%>" property="sampleIdRelatesTo">
					   	  <app:optionsCollection 
										name="<%=formName%>" 
							    		property="parentSamples" 
										label="accessionNumber" 
										value="id"  
		
							/>
                        
					   </html:select>
						</td>
		</tr--%>
 		<tr>
		<td>&nbsp;</td>
		</tr>
</table>

<%--bugzilla 1512 custom JavascriptValidator--%>
<app:javascript formName="sampleForm"/>

